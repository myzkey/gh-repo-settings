{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/myzkey/gh-repo-settings/main/schema.json",
  "$defs": {
    "ActionsConfig": {
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable or disable GitHub Actions"
        },
        "allowed_actions": {
          "type": "string",
          "enum": [
            "all",
            "local_only",
            "selected"
          ],
          "description": "Which actions are allowed"
        },
        "selected_actions": {
          "$ref": "#/$defs/SelectedActionsConfig",
          "description": "Configuration for selected actions (when allowed_actions is 'selected')"
        },
        "default_workflow_permissions": {
          "type": "string",
          "enum": [
            "read",
            "write"
          ],
          "description": "Default GITHUB_TOKEN permissions"
        },
        "can_approve_pull_request_reviews": {
          "type": "boolean",
          "description": "Allow GitHub Actions to create and approve pull requests"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "BranchRule": {
      "properties": {
        "required_reviews": {
          "type": "integer",
          "maximum": 6,
          "minimum": 0,
          "description": "Number of required approving reviews"
        },
        "dismiss_stale_reviews": {
          "type": "boolean",
          "description": "Dismiss approvals when new commits are pushed"
        },
        "require_code_owner": {
          "type": "boolean",
          "description": "Require review from CODEOWNERS"
        },
        "require_status_checks": {
          "type": "boolean",
          "description": "Require status checks to pass"
        },
        "status_checks": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "List of required status check names"
        },
        "strict_status_checks": {
          "type": "boolean",
          "description": "Require branches to be up to date"
        },
        "required_deployments": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "Required deployment environments"
        },
        "require_signed_commits": {
          "type": "boolean",
          "description": "Require signed commits"
        },
        "require_linear_history": {
          "type": "boolean",
          "description": "Require linear history (no merge commits)"
        },
        "enforce_admins": {
          "type": "boolean",
          "description": "Enforce rules for administrators"
        },
        "restrict_creations": {
          "type": "boolean",
          "description": "Restrict branch creation"
        },
        "restrict_pushes": {
          "type": "boolean",
          "description": "Restrict who can push"
        },
        "allow_force_pushes": {
          "type": "boolean",
          "description": "Allow force pushes"
        },
        "allow_deletions": {
          "type": "boolean",
          "description": "Allow branch deletion"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "EnvConfig": {
      "properties": {
        "required": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "List of required environment variable names"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Label": {
      "properties": {
        "name": {
          "type": "string",
          "description": "Label name"
        },
        "color": {
          "type": "string",
          "pattern": "^[0-9a-fA-F]{6}$",
          "description": "Hex color without #"
        },
        "description": {
          "type": "string",
          "description": "Label description"
        }
      },
      "additionalProperties": false,
      "type": "object",
      "required": [
        "name",
        "color"
      ]
    },
    "LabelsConfig": {
      "properties": {
        "replace_default": {
          "type": "boolean",
          "description": "Delete labels not in config"
        },
        "items": {
          "items": {
            "$ref": "#/$defs/Label"
          },
          "type": "array",
          "description": "List of label definitions"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "RepoConfig": {
      "properties": {
        "description": {
          "type": "string",
          "description": "Repository description"
        },
        "homepage": {
          "type": "string",
          "description": "Homepage URL"
        },
        "visibility": {
          "type": "string",
          "enum": [
            "public",
            "private",
            "internal"
          ],
          "description": "Repository visibility"
        },
        "allow_merge_commit": {
          "type": "boolean",
          "description": "Allow merge commits"
        },
        "allow_rebase_merge": {
          "type": "boolean",
          "description": "Allow rebase merging"
        },
        "allow_squash_merge": {
          "type": "boolean",
          "description": "Allow squash merging"
        },
        "delete_branch_on_merge": {
          "type": "boolean",
          "description": "Auto-delete head branches after merge"
        },
        "allow_update_branch": {
          "type": "boolean",
          "description": "Allow updating PR branches"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "SecretsConfig": {
      "properties": {
        "required": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "List of required secret names"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "SelectedActionsConfig": {
      "properties": {
        "github_owned_allowed": {
          "type": "boolean",
          "description": "Allow actions created by GitHub"
        },
        "verified_allowed": {
          "type": "boolean",
          "description": "Allow actions from verified creators"
        },
        "patterns_allowed": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "Patterns for allowed actions (e.g. 'actions/*')"
        }
      },
      "additionalProperties": false,
      "type": "object"
    }
  },
  "properties": {
    "extends": {
      "items": {
        "type": "string"
      },
      "type": "array",
      "description": "List of preset URLs or file paths to inherit from"
    },
    "repo": {
      "$ref": "#/$defs/RepoConfig",
      "description": "Repository settings"
    },
    "topics": {
      "items": {
        "type": "string"
      },
      "type": "array",
      "description": "Repository topics"
    },
    "labels": {
      "$ref": "#/$defs/LabelsConfig",
      "description": "Issue labels configuration"
    },
    "branch_protection": {
      "additionalProperties": {
        "$ref": "#/$defs/BranchRule"
      },
      "type": "object",
      "description": "Branch protection rules keyed by branch name"
    },
    "secrets": {
      "$ref": "#/$defs/SecretsConfig",
      "description": "Required secrets configuration"
    },
    "env": {
      "$ref": "#/$defs/EnvConfig",
      "description": "Required environment variables configuration"
    },
    "actions": {
      "$ref": "#/$defs/ActionsConfig",
      "description": "GitHub Actions permissions configuration"
    }
  },
  "additionalProperties": false,
  "type": "object",
  "title": "gh-repo-settings configuration",
  "description": "Configuration schema for gh-repo-settings (gh rset) - GitHub repository settings management tool"
}
