# コマンド

## `init` - 設定ファイルの初期化

対話形式で設定ファイルを作成します。

```bash
# .github/repo-settings.yaml を対話形式で作成
gh repo-settings init

# 出力先を指定
gh repo-settings init -o config.yaml

# 既存ファイルを上書き
gh repo-settings init -f
```

## `export` - リポジトリ設定のエクスポート

現在の GitHub リポジトリ設定を YAML 形式でエクスポートします。

```bash
# 標準出力にエクスポート
gh repo-settings export

# 単一ファイルにエクスポート
gh repo-settings export -s .github/repo-settings.yaml

# ディレクトリにエクスポート（複数ファイル）
gh repo-settings export -d .github/repo-settings/

# シークレット名を含める
gh repo-settings export -s settings.yaml --include-secrets

# 特定のリポジトリからエクスポート
gh repo-settings export -r owner/repo -s settings.yaml
```

## `plan` - 変更のプレビュー

設定を検証し、適用せずに計画された変更を表示します。

```bash
# すべての変更をプレビュー（デフォルトパスを使用）
gh repo-settings plan

# 設定ファイルを指定
gh repo-settings plan -c custom-config.yaml

# ディレクトリ設定でプレビュー
gh repo-settings plan -d .github/repo-settings/

# 現在のGitHub設定を表示（デバッグ用）
gh repo-settings plan --show-current

# シークレットの存在のみチェック
gh repo-settings plan --secrets

# 環境変数のみチェック
gh repo-settings plan --env
```

### Status Check 検証

`plan` 実行時、ブランチ保護ルールの `status_checks` 名が `.github/workflows/` ファイルのジョブ名と一致するか自動で検証します:

```
⚠ status check lint not found in workflows
⚠ status check test not found in workflows
  Available checks: build, golangci-lint, Run tests
```

## `apply` - 変更の適用

YAML 設定を GitHub リポジトリに適用します。

```bash
# 変更を適用（デフォルトパスを使用）
gh repo-settings apply

# ドライラン（plan と同じ）
gh repo-settings apply --dry-run

# 設定ファイルを指定
gh repo-settings apply -c custom-config.yaml

# ディレクトリから適用
gh repo-settings apply -d .github/repo-settings/
```

## グローバルオプション

| オプション | 説明 |
|-----------|------|
| `-v, --verbose` | デバッグ出力を表示 |
| `-q, --quiet` | エラーのみ表示 |
| `-r, --repo <owner/name>` | 対象リポジトリ（デフォルト: 現在のリポジトリ） |
